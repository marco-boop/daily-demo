<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="scratch.css">
    <script crossorigin src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script crossorigin src="https://unpkg.com/@daily-co/daily-js"></script>
    <script>
      $(document).ready(function(){
        callFrame = window.DailyIframe.createFrame();

        callFrame.join({ url: 'https://msj.daily.co/hello' });
    
        callFrame.on('joining-meeting', (event) => { 
               console.log('joining-meeting event', event);
            })

        callFrame.on('joined-meeting', (event) => { 
               console.log('joined-meeting', event);
               var host = event.participants.local.user_id;
               console.log('Your are the host and your id is ' + host);
            })

        callFrame.on('participant-joined', (event) => { 
               //console.log('Somebody else is here act normal!', event);
               var participant_id = event.participant.user_id;
               var video_status = event.participant.video;
               $('#participants-table tr:last').after('<tr id='+participant_id+'><td>'+participant_id+'</td><td>'+video_status+'</td></tr>');
            })   

        callFrame.on('participant-updated', (event) => { 
               var participant_id = event.participant.user_id;
               var video_status = event.participant.video;
               console.log(participant_id, 'updated their video status to', video_status);//this works for sure
               $('#participants-table #'+participant_id+'').html('<tr id='+participant_id+'><td>'+participant_id+'</td><td>'+video_status+'</td></tr>');
           }) 
        })
      
      </script>
  </head>

  <body>
  	<p>Marco's Room</p>

    <div>
      <table id="participants-table">
        <tr>
          <th>User Id</th>
          <th>Camera On / Hand Raise</th>
        </tr>
      </table>
    </div>

  </body>
</html>